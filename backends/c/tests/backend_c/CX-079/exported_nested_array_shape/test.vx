// @rfc: backends/c/README.md#types--layout
// @desc: Exported nested arrays keep full shape in public C ABI declarations and definitions.
// @expect-exit: 0
// @command: python3 -c "import pathlib, re, subprocess, sys; subprocess.run([sys.argv[1], '-b', 'c', 'test.vx'], check=True); hdr = pathlib.Path('out.h').read_text(); src = pathlib.Path('out.c').read_text(); ok = re.search(r'extern\\s+[^;]*\\bvx_bw\\[2\\]\\[3\\]\\s*;', hdr) and re.search(r'extern\\s+[^;]*\\bvx_rgb\\[2\\]\\[2\\]\\[3\\]\\s*;', hdr) and re.search(r'\\bvx_bw\\[2\\]\\[3\\]\\s*=\\s*\\{', src) and re.search(r'\\bvx_rgb\\[2\\]\\[2\\]\\[3\\]\\s*=\\s*\\{', src); sys.exit(0 if ok else 1)" {VEXEL}

^bw:#u8[2][3] = [ [2, 3, 4], [5, 6, 7] ];
^rgb:#u8[2][2][3] = [ [ [2, 3, 4], [5, 6, 7] ], [ [8, 9, 10], [11, 12, 13] ] ];

&^main() -> #b {
    1
}
